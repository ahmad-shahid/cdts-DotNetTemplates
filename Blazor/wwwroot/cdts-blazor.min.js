window.blazorCulture={get:()=>window.localStorage.BlazorCulture,set:n=>window.localStorage.BlazorCulture=n};var cdtsBlazor={exitScriptObj:null,globalSerializedFooter:null,globalSerializedTop:null,globalSerializedPreFooter:null,globalSerializedSectionMenu:null,currentPage:null,cdnEnv:null,defaultCSSHref:"https://www.canada.ca/etc/designs/canada/cdts/gcweb/v5_0_0/cdts/cdts-styles.css",setRefTop:function(n){this.applyRefTop(n)},setTop:function(n,t){if(this.globalSerializedTop!=n){const r=JSON.parse(n),i=document.createElement("template");i.insertAdjacentHTML("afterbegin",t?wet.builder.appTop(r):wet.builder.top(r));for(let n of i.children)n.classList.add("cdtsblazor-top-tag");document.body.querySelectorAll(".cdtsblazor-top-tag").forEach(n=>n.remove());for(let n=i.children.length-1;n>=0;n--){const t=i.children[n];document.body.insertAdjacentElement("afterbegin",t)}this.exitScriptObj.exitScript&&(this.exitScriptObj.displayModal||this.exitScriptObj.exitURL!=""||this.exitScriptObj.exitURL!=null)&&this.resetExitScript(this.exitScriptObj);this.globalSerializedTop=n}},setPreFooter:function(n){if(this.globalSerializedPreFooter!=n){const i=JSON.parse(n),t=document.createElement("template");t.insertAdjacentHTML("afterbegin",wet.builder.preFooter(i));for(let n of t.children)n.classList.add("cdtsblazor-preFooter-tag");document.querySelector("main").querySelectorAll(".cdtsblazor-preFooter-tag").forEach(n=>n.remove());for(let n=t.children.length-1;n>=0;n--){const i=t.children[n];document.querySelector("main").insertAdjacentElement("beforeend",i)}this.exitScriptObj.exitScript&&(this.exitScriptObj.displayModal||this.exitScriptObj.exitURL!=""||this.exitScriptObj.exitURL!=null)&&this.resetExitScript(this.exitScriptObj);this.globalSerializedPreFooter=n}},setFooter:function(n,t){if(this.globalSerializedFooter!=n){const r=JSON.parse(n),i=document.createElement("template");i.insertAdjacentHTML("afterbegin",t?wet.builder.appFooter(r):wet.builder.footer(r));for(let n of i.children)n.classList.add("cdtsfooter-footer-tag");document.body.querySelectorAll(".cdtsfooter-footer-tag").forEach(n=>n.remove());const u=Array.from(i.children);for(let n=0;n<u.length;n++){const t=u[n];document.body.appendChild(t)}this.exitScriptObj.exitScript&&(this.exitScriptObj.displayModal||this.exitScriptObj.exitURL!=""||this.exitScriptObj.exitURL!=null)&&this.resetExitScript(this.exitScriptObj);this.globalSerializedFooter=n}},setRefFooter:function(n,t){this.exitScriptObj=t;this.applyRefFooter(n)},setSectionMenu:function(n){if(this.globalSerializedSectionMenu!=n){$("#wb-sec, #cdts-main").wrapAll("<div class='container'><div class='row'><\/div><\/div>");const r=JSON.parse(n),t=document.createElement("div");t.insertAdjacentHTML("afterbegin",wet.builder.secmenu(r));const i=document.getElementById("wb-sec");i.childNodes.length>0?i.replaceChild(t):i.appendChild(t);this.exitScriptObj.exitScript&&(this.exitScriptObj.displayModal||this.exitScriptObj.exitURL!=""||this.exitScriptObj.exitURL!=null)&&this.resetExitScript(this.exitScriptObj);this.globalSerializedSectionMenu=n}},applyRefTop:function(n){const t=new DOMParser,i=JSON.parse(n),r=t.parseFromString("<html><head>"+wet.builder.refTop(i)+"<\/head><\/html>","text/html"),u=r.head.childNodes,f=new this.FragmentLoader(document.head,u);f.run()},applyRefFooter:function(n){const t=new DOMParser,i=JSON.parse(n),r=t.parseFromString("<html><body>"+wet.builder.refFooter(i)+"<\/body><\/html>","text/html"),u=r.body.childNodes,f=new this.FragmentLoader(document.body,u);f.run()},FragmentLoader:function(n,t){this.targetElem=n;this.fragmentNodes=t;this.cursorIndex=0;this.nodeScriptClone=function(n){const t=document.createElement("script");t.text=n.innerHTML;let i=-1;const r=n.attributes;let u;while(++i<r.length)t.setAttribute((u=r[i]).name,u.value);return t};this.onScriptLoaded=function(){this.run()};this.run=function(){while(this.cursorIndex<this.fragmentNodes.length)if(this.fragmentNodes[this.cursorIndex].tagName!=null&&this.fragmentNodes[this.cursorIndex].tagName.toUpperCase()==="SCRIPT"){const n=this.nodeScriptClone(this.fragmentNodes[this.cursorIndex]),t=n.hasAttribute("src");if(t&&(n.onload=this.onScriptLoaded.bind(this)),this.targetElem.appendChild(n),this.cursorIndex++,t)return}else this.targetElem.appendChild(document.importNode(this.fragmentNodes[this.cursorIndex],!0)),this.cursorIndex++}},installCDTS:async function(n){var i;document.documentElement.setAttribute("lang",n);const t=this.findCDTSCssHref();i=t?this.deriveCDTSEnv(t):this.deriveCDTSEnv(this.defaultCSSHref);await this.appendScriptElement(document.head,`${i.baseUrl}cdts/compiled/wet-${n}.js`,"cdts-main-js",!1)},appendScriptElement:function(n,t,i,r){return new Promise(function(u,f){const e=document.createElement("script");i&&e.setAttribute("id",i);r&&(e.setAttribute("integrity",r),e.setAttribute("crossorigin","anonymous"));e.onload=u.bind(null);e.onerror=f;e.setAttribute("src",t);n.appendChild(e)})},deriveCDTSEnv:function(n){if(!n)return null;try{const u=new URL(n),t=u.hostname.toLowerCase(),i=u.pathname.toLowerCase(),f=n.substring(0,n.lastIndexOf("/cdts/cdts-")+1),e=i.includes("/gcintranet/")?"gcintranet":"gcweb";let r=null;r=t==="www.canada.ca"||t==="canada.ca"?"prod":t==="cdts.service.canada.ca"?e==="gcweb"?"esdcprod":"prod":t==="templates.service.gc.ca"?"esdcprod":f;this.cdnEnv=r;let o=null;return o=i.includes("/rn/cls/")||i.includes("/rn/cdts/")?"rn":(i.match(/\/(v[0-9]+_[0-9]+_[0-9]+)\//)||[null,null])[1],{cdnEnv:r,theme:e,version:o,baseUrl:f}}catch(t){return console.error("Unexpected error parsing CDTS stylesheet URL, unable to derive CDTS parameters, defaults will be used.",t),null}},findCDTSCssHref:function(){return Array.from(document.head.querySelectorAll('link[rel="stylesheet"]')).map(n=>n.getAttribute("href")).find(n=>n?.includes("/cdts/cdts-"))||null},resetExitScript:function(n){var t=document.getElementsByTagName("a");wet.utilities.wetExitScript(n.displayModal!=null?n.displayModal.toString():"undefined",n.exitURL!=null?n.exitURL:"undefined",n.exitDomains!=null?n.exitDomains:"undefined",n.exitMsg!=null?n.exitMsg:"undefined",n.yesMsg!=null?n.yesMsg:"undefined",n.cancelMsg!=null?n.cancelMsg:"undefined",n.msgBoxHeader!=null?n.msgBoxHeader:"undefined",n.targetWarning!=null?n.targetWarning:"undefined",n.displayModalForNewWindow!=null?n.displayModalForNewWindow.toString():"undefined",t)},resetExitScriptOnPage:function(){this.resetExitScript(this.exitScriptObj)},resetWetComponents:function(n){if(typeof $!="undefined")if(Array.isArray(n))for(let t of n)$(`.${t}`).trigger("wb-init");else $(`.${n}`).trigger("wb-init")},SetCurrentPage:function(n){this.currentPage=n},GetCurrentPage:function(){DotNet.invokeMethodAsync("GoC.WebTemplate.Blazor","GetCurrentPage",this.currentPage)}};